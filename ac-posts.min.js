(function(){var a=document.getElementsByTagName("script");var d=a[a.length-1].src;if(d.length==0){d=window.installPath+"/ac-angular-posts/includes/ac-posts.php"}angular.module("acPosts",[]).factory("PostService",b).service("PostVars",c);b.$inject=["$http","PostVars","$cacheFactory","AcUtils"];function b(p,f,q,j){var o={};var g=d.replace("ac-posts.js","/includes/ac-posts.php");o.get=h;o.getByParams=r;o.create=n;o.update=k;o.remove=l;o.goToPagina=e;o.next=m;o.prev=i;return o;function h(v){var s=g+"?function=getPosts";var u=q.get("$http");var t=[];if(u.get(s)!=undefined){if(f.clearCache){u.remove(s)}else{t=u.get(s);v(t);return}}return p.get(s,{cache:true}).success(function(w){u.put(s,w);f.clearCache=false;f.paginas=(w.length%f.paginacion==0)?parseInt(w.length/f.paginacion):parseInt(w.length/f.paginacion)+1;v(w)}).error(function(w){v(w);f.clearCache=false})}function r(u,s,t,v){h(function(w){j.getByParams(u,s,t,w,v)})}function l(s,t){return p.post(g,{"function":"removePost",post_id:s}).success(function(u){if(u!=="false"){f.clearCache=true;t(u)}}).error(function(u){t(u)})}function n(s,t){return p.post(g,{"function":"createPost",post:JSON.stringify(s)}).success(function(u){f.clearCache=true;t(u)}).error(function(u){f.clearCache=true;t(u)})}function k(s,t){return p.post(g,{"function":"updatePost",post:JSON.stringify(s)}).success(function(u){f.clearCache=true;t(u)}).error(function(u){t(u)})}function e(s){if(isNaN(s)||s<1){f.pagina=1;return f}if(s>f.paginas){f.pagina=f.paginas;return f}f.pagina=s-1;f.start=f.pagina*f.paginacion;return f}function m(){if(f.pagina+1>f.paginas){return f}f.start=(f.pagina*f.paginacion);f.pagina=f.pagina+1;return f}function i(){if(f.pagina-2<0){return f}f.start=(f.pagina-2)*f.paginacion;f.pagina=f.pagina-1;return f}}c.$inject=[];function c(){this.paginas=1;this.pagina=1;this.paginacion=10;this.start=0;this.activos=false;this.clearCache=true}})();